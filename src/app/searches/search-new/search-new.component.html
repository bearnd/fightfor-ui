<div class="main-content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header card-header-icon card-header-rose">
            <div class="card-icon">
              <i class="material-icons">add_circle</i>
            </div>
            <div class="row">
              <div class="col-md-8">
                <h4 class="card-title">
                  Search
                </h4>
              </div>

              <div class="col-md-4">
                <button
                  mat-raised-button mat-min-fab
                  class="btn btn-rose btn-link btn-round btn-fab pull-right"
                  (click)="toggleSaved()"
                  [disableRipple]="true"
                  matTooltip="Save this search" [matTooltipPosition]="'left'"
                >
                  <i class="material-icons">{{ isSaved ? "favorite" : "favorite_border" }}</i>
                </button>
              </div>
            </div>
          </div>
          <div class="card-body">
            <form [formGroup]="form" (ngSubmit)="onSubmit()">

              <div class="form-group">
                <!--Conditions chip-input with autocomplete.-->
                <mat-form-field class="term-list-input">
                  <mat-chip-list #termsConditionsChipList>
                    <mat-chip
                      *ngFor="let term of termsFilterConditionsService.termsSelected"
                      [selectable]="false"
                      [selected]="true"
                      [removable]="true"
                      (remove)="onRemoveTermCondition(term)"
                    >
                      {{ term.name }}
                      <mat-icon matChipRemove>cancel</mat-icon>
                    </mat-chip>
                    <input
                      type="text"
                      id="conditions"
                      formControlName="conditions"
                      placeholder="Condition/Disease"
                      [matAutocomplete]="termsConditionsAutocomplete"
                      [matChipInputFor]="termsConditionsChipList"
                      [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                    />
                  </mat-chip-list>
                  <!--Autocomplete for conditions chip-input.-->
                  <mat-autocomplete
                    [autoActiveFirstOption]="true"
                    #termsConditionsAutocomplete="matAutocomplete"
                    (optionSelected)="onTermConditionSelected($event)"
                  >
                    <mat-option *ngFor="let term of termsConditionsFiltered" [value]="term">
                      {{ term.name }}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>
              </div>

              <div class="form-group">
                <!--Interventions chip-input with autocomplete.-->
                <mat-form-field class="term-list-input">
                  <mat-chip-list #termsInterventionsChipList>
                    <mat-chip
                      *ngFor="let term of termsFilterInterventionsService.termsSelected"
                      [selectable]="false"
                      [selected]="true"
                      [removable]="true"
                      (remove)="onRemoveTermIntervention(term)"
                    >
                      {{ term.name }}
                      <mat-icon matChipRemove>cancel</mat-icon>
                    </mat-chip>
                    <input
                      type="text"
                      id="interventions"
                      formControlName="interventions"
                      placeholder="Therapies/Interventions"
                      [matAutocomplete]="termsInterventionsAutocomplete"
                      [matChipInputFor]="termsInterventionsChipList"
                      [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                    />
                  </mat-chip-list>
                  <!--Autocomplete for interventions chip-input.-->
                  <mat-autocomplete
                    [autoActiveFirstOption]="true"
                    #termsInterventionsAutocomplete="matAutocomplete"
                    (optionSelected)="onTermInterventionSelected($event)"
                  >
                    <mat-option *ngFor="let term of termsInterventionsFiltered" [value]="term">
                      {{ term.name }}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>
              </div>

            </div>
            <div class="card-footer">

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
